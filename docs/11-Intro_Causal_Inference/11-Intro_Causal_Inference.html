<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>STAT 227: Statistical Design and Analysis</title>
    <meta charset="utf-8" />
    <meta name="author" content="Anthony Scotina" />
    <script src="libs/header-attrs-2.11/header-attrs.js"></script>
    <script src="libs/core-js-2.5.3/shim.min.js"></script>
    <script src="libs/react-16.12.0/react.min.js"></script>
    <script src="libs/react-16.12.0/react-dom.min.js"></script>
    <script src="libs/reactwidget-1.0.0/react-tools.js"></script>
    <script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
    <script src="libs/reactable-binding-0.2.3/reactable.js"></script>
    <link rel="stylesheet" href="my-theme.css" type="text/css" />
    <link rel="stylesheet" href="my-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# STAT 227: Statistical Design and Analysis
## Introduction to Causal Inference
### Anthony Scotina

---








&lt;!--
pagedown::chrome_print("~/Dropbox/Teaching/03-Simmons Courses/MATH228-Introduction to Data Science/Lecture Slides/01-Introduction/01-Introduction.html")
--&gt;

class: center, middle, frame

# The Causal Revolution

.center[
&lt;img src="meme.jpg" width="326" /&gt;
]

---

# What is causal inference?

**Infer**ring **causal** effects of any *treatment*/*policy*/*intervention* (etc.)

--

.center[
&lt;img src="11-Intro_Causal_Inference_files/figure-html/unnamed-chunk-4-1.png" width="100%" /&gt;
]

--

- **Effect** of metformin + sulfonylurea on CVD symptoms in T2D patients
- **Effect** of climate change policies on emissions
- **Effect** of coffee on cancer risk

---

class: center, middle, frame

# The Rubin Causal Model

---

# The Rubin Causal Model

.pull-left[
.display2[An approach to causal inference based on *potential outcomes*]

- `\([Y(0), Y(1)]\)`

- `\([Y^0, Y^1]\)`

]

.pull-right[

&lt;img src="rubin.jpg" width="2000" /&gt;

&gt; [**Donald Rubin**](https://statistics.fas.harvard.edu/people/donald-b-rubin)

]

.center[
## What are potential outcomes?
]

--

[Click: **One of the most important statistical ideas of the past 50 years**](https://statmodeling.stat.columbia.edu/2020/12/09/what-are-the-most-important-statistical-ideas-of-the-past-50-years/)

- According to Andrew Gelman

---

# Potential Outcomes

**Intuition**

*Inferring the (causal) effect of an intervention on some outcome*

.pull-left[
&lt;img src="emoji_neutral.png" width="98" /&gt;

- *A student, pre-STAT 228*
]

--

.pull-right[
&lt;img src="stat228_potential.png" width="316" /&gt;

.display2[A causal effect!]
]

---

# Potential Outcomes

**Intuition**

*Inferring the (causal) effect of an intervention on some outcome*

.pull-left[
&lt;img src="emoji_neutral.png" width="98" /&gt;

- *A student, pre-STAT 228*
]

.pull-right[
&lt;img src="stat228_potential2.png" width="323" /&gt;

.display1[No causal effect...]
]

---

# Potential Outcomes

.display1[Notation]

.pull-left[
- *T*: observed **treatment** (binary)
    - STAT 228 (1)
    - no STAT 228 (0)

- *Y*: observed **outcome**
    - *Love of statistics* (1-10)

- *i*: denotes *specific observation*
    - Example: `\(Y_{i}\)`
]

--

.pull-right[
&lt;img src="stat228_do_calc.png" width="323" /&gt;
]

--

.display1[More Notation]

- `\(Y_{i}(1)\)`: **potential outcome** *conditional on treatment*
- `\(Y_{i}(0)\)`: **potential outcome** *conditional on no treatment*

--

.center[
**Causal Effect**: `\(Y_{i}(1)-Y_{i}(0)\)`
]

---

# Fundamental Problem of Causal Inference

.center[
&lt;img src="emoji_thinking.jpeg" width="86" /&gt;
]

--

&gt; [(Holland, 1986)](http://www.cs.columbia.edu/~blei/fogm/2019F/readings/Holland1986.pdf): We only ever observe one realization. 

**If you chose to take STAT 228, you cannot simultaneously *not choose* to take it!**

.pull-left[
&lt;img src="stat228_problem.png" width="362" /&gt;
]

--

.pull-right.center[
**Causal Effect**: `\(Y_{i}(1)-\)`‚ùìÔ∏è
]

---

# Potential Outcomes (in a table)

.center[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#rofetlebom .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rofetlebom .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rofetlebom .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rofetlebom .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rofetlebom .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rofetlebom .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rofetlebom .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rofetlebom .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rofetlebom .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rofetlebom .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rofetlebom .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rofetlebom .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#rofetlebom .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rofetlebom .gt_from_md > :first-child {
  margin-top: 0;
}

#rofetlebom .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rofetlebom .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rofetlebom .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#rofetlebom .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rofetlebom .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#rofetlebom .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rofetlebom .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rofetlebom .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rofetlebom .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rofetlebom .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rofetlebom .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#rofetlebom .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rofetlebom .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#rofetlebom .gt_left {
  text-align: left;
}

#rofetlebom .gt_center {
  text-align: center;
}

#rofetlebom .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rofetlebom .gt_font_normal {
  font-weight: normal;
}

#rofetlebom .gt_font_bold {
  font-weight: bold;
}

#rofetlebom .gt_font_italic {
  font-style: italic;
}

#rofetlebom .gt_super {
  font-size: 65%;
}

#rofetlebom .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="rofetlebom" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Student</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Treated</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome&lt;br&gt;with treatment</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome&lt;br&gt;without treatment</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Effect</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">8.0</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">8</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">7.5</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">7.5</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">3</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">8.5</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">8.5</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">4</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">6.0</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">6</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">7.5</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">7.5</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">6</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">8.0</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">8</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">10.0</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">10</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">8.0</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">8</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
  </tbody>
  
  
</table></div>
]

--

- `\(Y_{i}\)`: **Outcome** for student *i*
    - `\(Y_{i}(1)\)`: **Outcome** with treatment (only *observed* for some)
    - `\(Y_{i}(0)\)`: **Outcome** without treatment (only *observed* for some)
    
- `\(Y_{i}(1)-Y_{i}(0)=\)` ‚ùì

---

# Fundamental Problem of Causal Inference

Remember, we can only *observe* `\(Y_{i}(1)\)` if person `\(i\)` actually received the treatment!

- What can we do to estimate a **causal effect**? ü§îü§îü§î

--

.display2[Average Treatment Effect (ATE)]

`$$\large\text{ATE}=E[Y(1)-Y(0)]=E[Y(1)]-E[Y(0)]=‚ùì\normalsize$$`

.center-small[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#atyhrblykz .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#atyhrblykz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#atyhrblykz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#atyhrblykz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#atyhrblykz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#atyhrblykz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#atyhrblykz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#atyhrblykz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#atyhrblykz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#atyhrblykz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#atyhrblykz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#atyhrblykz .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#atyhrblykz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#atyhrblykz .gt_from_md > :first-child {
  margin-top: 0;
}

#atyhrblykz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#atyhrblykz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#atyhrblykz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#atyhrblykz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#atyhrblykz .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#atyhrblykz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#atyhrblykz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#atyhrblykz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#atyhrblykz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#atyhrblykz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#atyhrblykz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#atyhrblykz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#atyhrblykz .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#atyhrblykz .gt_left {
  text-align: left;
}

#atyhrblykz .gt_center {
  text-align: center;
}

#atyhrblykz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#atyhrblykz .gt_font_normal {
  font-weight: normal;
}

#atyhrblykz .gt_font_bold {
  font-weight: bold;
}

#atyhrblykz .gt_font_italic {
  font-style: italic;
}

#atyhrblykz .gt_super {
  font-size: 65%;
}

#atyhrblykz .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="atyhrblykz" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Student</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Treated</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome&lt;br&gt;with treatment</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome&lt;br&gt;without treatment</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Effect</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">8.0</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">8</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">7.5</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">7.5</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">3</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">8.5</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">8.5</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">4</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">6.0</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">6</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">7.5</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">7.5</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">6</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">8.0</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">8</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">10.0</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">10</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">8.0</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">8</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
  </tbody>
  
  
</table></div>
]

---

# Average Treatment Effect (ATE)

`$$\large\text{ATE}=E[Y(1)-Y(0)]=E[Y(1)]-E[Y(0)]=‚ùì\normalsize$$`

.center-small[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#qzmzbzzhaf .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qzmzbzzhaf .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qzmzbzzhaf .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qzmzbzzhaf .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qzmzbzzhaf .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qzmzbzzhaf .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qzmzbzzhaf .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qzmzbzzhaf .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qzmzbzzhaf .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qzmzbzzhaf .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qzmzbzzhaf .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qzmzbzzhaf .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#qzmzbzzhaf .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qzmzbzzhaf .gt_from_md > :first-child {
  margin-top: 0;
}

#qzmzbzzhaf .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qzmzbzzhaf .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qzmzbzzhaf .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#qzmzbzzhaf .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qzmzbzzhaf .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#qzmzbzzhaf .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qzmzbzzhaf .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qzmzbzzhaf .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qzmzbzzhaf .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qzmzbzzhaf .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qzmzbzzhaf .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#qzmzbzzhaf .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qzmzbzzhaf .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#qzmzbzzhaf .gt_left {
  text-align: left;
}

#qzmzbzzhaf .gt_center {
  text-align: center;
}

#qzmzbzzhaf .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qzmzbzzhaf .gt_font_normal {
  font-weight: normal;
}

#qzmzbzzhaf .gt_font_bold {
  font-weight: bold;
}

#qzmzbzzhaf .gt_font_italic {
  font-style: italic;
}

#qzmzbzzhaf .gt_super {
  font-size: 65%;
}

#qzmzbzzhaf .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="qzmzbzzhaf" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Student</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Treated</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome&lt;br&gt;with treatment</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome&lt;br&gt;without treatment</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Effect</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">8.0</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.4);">8</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.4);">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">7.5</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.4);">7.5</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.4);">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">3</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">8.5</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.4);">8.5</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.4);">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">4</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">6.0</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.4);">?</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.4);">6</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">7.5</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.4);">7.5</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.4);">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">6</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">8.0</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.4);">?</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.4);">8</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">10.0</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.4);">?</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.4);">10</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">8.0</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.4);">?</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.4);">8</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
  </tbody>
  
  
</table></div>
]

- `\(\color{#418FF7}{E[Y\mid T = 1]=\frac{1}{4}(8+7.5+8.5+7.5)=7.875}\)`
- `\(\color{#ED73B2}{E[Y\mid T = 0]=\frac{1}{4}(6+8+10+8)=8}\)`

--

.center[
## Is the causal effect 7.875 - 8 = -0.125?
]

---

# NO!!!

.pull-left[
![](https://media.giphy.com/media/3o7btT1T9qpQZWhNlK/giphy.gif)

![](https://media.giphy.com/media/JYZ397GsFrFtu/giphy.gif)
]

.pull-right[
![](https://media.giphy.com/media/3og0IPCZ4Xjydp7sAw/giphy.gif)

![](https://media.giphy.com/media/STfLOU6iRBRunMciZv/giphy.gif)
]

---

# Average Treatment Effect (ATE)

`$$\text{ATE}=E[Y(1)]-E[Y(0)]\boldsymbol\neq E[Y\mid T=1]-E[Y\mid T=0]$$`

- `\(E[Y\mid T=1]-E[Y\mid T=0]\)` shows an **associative difference**
    - (a *correlation is not causation* difference...)

.center-small[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#zjmpcivltx .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zjmpcivltx .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zjmpcivltx .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zjmpcivltx .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zjmpcivltx .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zjmpcivltx .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zjmpcivltx .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zjmpcivltx .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zjmpcivltx .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zjmpcivltx .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zjmpcivltx .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zjmpcivltx .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#zjmpcivltx .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zjmpcivltx .gt_from_md > :first-child {
  margin-top: 0;
}

#zjmpcivltx .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zjmpcivltx .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zjmpcivltx .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#zjmpcivltx .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zjmpcivltx .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#zjmpcivltx .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zjmpcivltx .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zjmpcivltx .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zjmpcivltx .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zjmpcivltx .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zjmpcivltx .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#zjmpcivltx .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zjmpcivltx .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#zjmpcivltx .gt_left {
  text-align: left;
}

#zjmpcivltx .gt_center {
  text-align: center;
}

#zjmpcivltx .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zjmpcivltx .gt_font_normal {
  font-weight: normal;
}

#zjmpcivltx .gt_font_bold {
  font-weight: bold;
}

#zjmpcivltx .gt_font_italic {
  font-style: italic;
}

#zjmpcivltx .gt_super {
  font-size: 65%;
}

#zjmpcivltx .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="zjmpcivltx" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Student</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Treated</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome&lt;br&gt;with treatment</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome&lt;br&gt;without treatment</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Effect</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">8.0</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.4);">8</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">7.5</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.4);">7.5</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">3</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">8.5</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.4);">8.5</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">4</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">6.0</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.4);">6</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">7.5</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.4);">7.5</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">6</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">8.0</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.4);">8</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">10.0</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.4);">10</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">8.0</td>
      <td class="gt_row gt_center">?</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.4);">8</td>
      <td class="gt_row gt_center" style="color: red; font-weight: bold;">?</td>
    </tr>
  </tbody>
  
  
</table></div>
]

--

The **observed outcomes**, `\(Y_{i}\)`, are *not necessarily* the same as `\(Y_{i}(1)\)` or `\(Y_{i}(0)\)`. 

- `\(Y_{i}\)` is only equal to the potential outcome corresponding to the *received treatment*.

---

# Average Treatment Effect (ATE)

Now *let's pretend* we know every potential outcome...

.center-small[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#lfndngphaq .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#lfndngphaq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lfndngphaq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#lfndngphaq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#lfndngphaq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lfndngphaq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lfndngphaq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#lfndngphaq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#lfndngphaq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#lfndngphaq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#lfndngphaq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#lfndngphaq .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#lfndngphaq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#lfndngphaq .gt_from_md > :first-child {
  margin-top: 0;
}

#lfndngphaq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#lfndngphaq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#lfndngphaq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#lfndngphaq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lfndngphaq .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#lfndngphaq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lfndngphaq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#lfndngphaq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#lfndngphaq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lfndngphaq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lfndngphaq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#lfndngphaq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lfndngphaq .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#lfndngphaq .gt_left {
  text-align: left;
}

#lfndngphaq .gt_center {
  text-align: center;
}

#lfndngphaq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#lfndngphaq .gt_font_normal {
  font-weight: normal;
}

#lfndngphaq .gt_font_bold {
  font-weight: bold;
}

#lfndngphaq .gt_font_italic {
  font-style: italic;
}

#lfndngphaq .gt_super {
  font-size: 65%;
}

#lfndngphaq .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="lfndngphaq" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Student</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Treated</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome&lt;br&gt;with treatment</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome&lt;br&gt;without treatment</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Effect</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">8</td>
      <td class="gt_row gt_center">6</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">2</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">7.5</td>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">0.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">3</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">8.5</td>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">0.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">4</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">6</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">1</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">7.5</td>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">0.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">6</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">8</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">0</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">9</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">10</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">-1</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">8.5</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">8</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">0.5</td>
    </tr>
  </tbody>
  
  
</table></div>
]

`\begin{align*}
ATE&amp;=E[Y(1)]-E[Y(0)]\\
   &amp;=\frac{2+0.5+0.5+1+0.5+0+(-1)+(0.5)}{8}\\
   &amp;=\boxed{0.5}
\end{align*}`

---

# Conditional Average Treatment Effect (CATE)

This is just the **ATE**, but in a *subgroup*. 

.center[
### Is STAT 228 more effective for certain course backgrounds?
]

--

.center-small[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#engxnsrwca .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#engxnsrwca .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#engxnsrwca .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#engxnsrwca .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#engxnsrwca .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#engxnsrwca .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#engxnsrwca .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#engxnsrwca .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#engxnsrwca .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#engxnsrwca .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#engxnsrwca .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#engxnsrwca .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#engxnsrwca .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#engxnsrwca .gt_from_md > :first-child {
  margin-top: 0;
}

#engxnsrwca .gt_from_md > :last-child {
  margin-bottom: 0;
}

#engxnsrwca .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#engxnsrwca .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#engxnsrwca .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#engxnsrwca .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#engxnsrwca .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#engxnsrwca .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#engxnsrwca .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#engxnsrwca .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#engxnsrwca .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#engxnsrwca .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#engxnsrwca .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#engxnsrwca .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#engxnsrwca .gt_left {
  text-align: left;
}

#engxnsrwca .gt_center {
  text-align: center;
}

#engxnsrwca .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#engxnsrwca .gt_font_normal {
  font-weight: normal;
}

#engxnsrwca .gt_font_bold {
  font-weight: bold;
}

#engxnsrwca .gt_font_italic {
  font-style: italic;
}

#engxnsrwca .gt_super {
  font-size: 65%;
}

#engxnsrwca .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="engxnsrwca" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Student</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">STAT227</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Treated</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome&lt;br&gt;with treatment</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome&lt;br&gt;without treatment</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Effect</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center" style="background-color: rgba(171,130,255,0.3);">Yes</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">8</td>
      <td class="gt_row gt_center">6</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">2</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center" style="background-color: rgba(171,130,255,0.3);">Yes</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">7.5</td>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">0.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">3</td>
      <td class="gt_row gt_center" style="background-color: rgba(171,130,255,0.3);">Yes</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">8.5</td>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">0.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">4</td>
      <td class="gt_row gt_center" style="background-color: rgba(171,130,255,0.3);">Yes</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">6</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">1</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center" style="background-color: rgba(171,130,255,0.3);">No</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">7.5</td>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">0.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">6</td>
      <td class="gt_row gt_center" style="background-color: rgba(171,130,255,0.3);">No</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">8</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">0</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center" style="background-color: rgba(171,130,255,0.3);">No</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">9</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">10</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">-1</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center" style="background-color: rgba(171,130,255,0.3);">No</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">8.5</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">8</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">0.5</td>
    </tr>
  </tbody>
  
  
</table></div>
]

--

`\(\small CATE_{\text{227}}=E[Y(1)-Y(0)\mid \text{STAT227}=\text{Yes}]=\frac{1}{4}(2+0.5+0.5+1)=\boxed{1}\normalsize\)`

`\(\small CATE_{\text{no227}}=E[Y(1)-Y(0)\mid \text{STAT227}=\text{No}]=\frac{1}{4}(0.5+0+(-1)+0.5)=\boxed{0}\normalsize\)`

---

# ATE on the Treated (ATT)

`$$\large\text{ATT}=E[Y(1)-Y(0)\mid T = 1]\normalsize$$`

.center[
### Is STAT 228 more effective for those who took STAT 228? üòê
]

--

.center-small[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#feontekxqz .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#feontekxqz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#feontekxqz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#feontekxqz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#feontekxqz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#feontekxqz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#feontekxqz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#feontekxqz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#feontekxqz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#feontekxqz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#feontekxqz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#feontekxqz .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#feontekxqz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#feontekxqz .gt_from_md > :first-child {
  margin-top: 0;
}

#feontekxqz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#feontekxqz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#feontekxqz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#feontekxqz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#feontekxqz .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#feontekxqz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#feontekxqz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#feontekxqz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#feontekxqz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#feontekxqz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#feontekxqz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#feontekxqz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#feontekxqz .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#feontekxqz .gt_left {
  text-align: left;
}

#feontekxqz .gt_center {
  text-align: center;
}

#feontekxqz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#feontekxqz .gt_font_normal {
  font-weight: normal;
}

#feontekxqz .gt_font_bold {
  font-weight: bold;
}

#feontekxqz .gt_font_italic {
  font-style: italic;
}

#feontekxqz .gt_super {
  font-size: 65%;
}

#feontekxqz .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="feontekxqz" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Student</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">STAT227</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Treated</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome&lt;br&gt;with treatment</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome&lt;br&gt;without treatment</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Effect</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">Yes</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">TRUE</td>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center">6</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">2</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">Yes</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">TRUE</td>
      <td class="gt_row gt_center">7.5</td>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">0.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">3</td>
      <td class="gt_row gt_center">Yes</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">TRUE</td>
      <td class="gt_row gt_center">8.5</td>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">0.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">4</td>
      <td class="gt_row gt_center">Yes</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center">6</td>
      <td class="gt_row gt_center">1</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">No</td>
      <td class="gt_row gt_center" style="color: #0174D9; font-weight: bold;">TRUE</td>
      <td class="gt_row gt_center">7.5</td>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.4);">0.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">6</td>
      <td class="gt_row gt_center">No</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center">0</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center">No</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">9</td>
      <td class="gt_row gt_center">10</td>
      <td class="gt_row gt_center">-1</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center">No</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">8.5</td>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center">0.5</td>
    </tr>
  </tbody>
  
  
</table></div>
]

--

- `\(\small ATT=E[Y(1)-Y(0)\mid T=1]=\frac{1}{4}(2+0.5+0.5+0.5)=\boxed{0.875}\normalsize\)`

---

# More on the ATT

.display1[Why might one use the ATT?]

- In some scenarios, we might be more interested in the causal effect of a treatment on the subset of individuals *who actually receive the treatment*!

--

From [Ho et al. (2007)](https://gking.harvard.edu/files/matchp.pdf):

&gt; In our example, this is the average causal effect in districts in which the Democratic Party nominated the incumbent member of the House. From one perspective, we might want to know this treatment effect on the treated (the ATT) since obviously this is the group of districts where the treatment was applied. In other words, the ATT is the effect of the treatment actually applied. Medical studies typically use the ATT as the designated quantity of interest because they often only care about the causal effect of drugs for patients that receive or would receive the drugs. For another example, in job training programs, we are not normally interested in assigning employed people to have this training.  

---

# ATE vs ATT

.center[
### They sound similar, but they aren't always the same!
]

- `\(\large ATE = E[Y(1) - Y(0)]\normalsize\)` 

- `\(\large ATT = E[Y(1) - Y(0)\mid T = 1]\normalsize\)`

--

.center[
## ATE = ATT + Treatment Selection Bias
]

If study participants are **randomized** into treatment groups, selection bias is zero. 

---

# The Causal Revolution

.left-column[
&lt;img src="book_of_why.jpg" width="444" /&gt;
]

.right-column[
&lt;img src="pearl.jpg" width="960" /&gt;
]

--

(Pearl et al., 2016): *X* is a cause of *Y* if *Y* **listens to** *X* and decides its value in response to what it hears. 

- But what if *Y* listens to more than just *X*?

---

# Back to the "REAL" Data

.pull-left-small[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#vdiykbtxgo .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vdiykbtxgo .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vdiykbtxgo .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#vdiykbtxgo .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#vdiykbtxgo .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vdiykbtxgo .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vdiykbtxgo .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vdiykbtxgo .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vdiykbtxgo .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vdiykbtxgo .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vdiykbtxgo .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vdiykbtxgo .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#vdiykbtxgo .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#vdiykbtxgo .gt_from_md > :first-child {
  margin-top: 0;
}

#vdiykbtxgo .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vdiykbtxgo .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#vdiykbtxgo .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#vdiykbtxgo .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vdiykbtxgo .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#vdiykbtxgo .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vdiykbtxgo .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#vdiykbtxgo .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#vdiykbtxgo .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vdiykbtxgo .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vdiykbtxgo .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#vdiykbtxgo .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vdiykbtxgo .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#vdiykbtxgo .gt_left {
  text-align: left;
}

#vdiykbtxgo .gt_center {
  text-align: center;
}

#vdiykbtxgo .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vdiykbtxgo .gt_font_normal {
  font-weight: normal;
}

#vdiykbtxgo .gt_font_bold {
  font-weight: bold;
}

#vdiykbtxgo .gt_font_italic {
  font-style: italic;
}

#vdiykbtxgo .gt_super {
  font-size: 65%;
}

#vdiykbtxgo .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="vdiykbtxgo" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Student</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">STAT227</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Treated</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">Yes</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">8.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">Yes</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">7.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">3</td>
      <td class="gt_row gt_center">Yes</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">8.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">4</td>
      <td class="gt_row gt_center">Yes</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">6.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">No</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">7.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">6</td>
      <td class="gt_row gt_center">No</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">8.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center">No</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">10.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center">No</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">8.0</td>
    </tr>
  </tbody>
  
  
</table></div>
]

.pull-right[
The **causal effect** is *not* the difference in mean `Outcome` between *treated* and *untreated*!

- Treatment is *not* **randomly assigned**. 

- We cannot see *unit level causal effects* because we cannot observe *both* **potential outcomes** for each unit. 
]

---

# Back to the "REAL" Data

.pull-left-small[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#rbruktqziv .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rbruktqziv .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rbruktqziv .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rbruktqziv .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rbruktqziv .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rbruktqziv .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rbruktqziv .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rbruktqziv .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rbruktqziv .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rbruktqziv .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rbruktqziv .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rbruktqziv .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#rbruktqziv .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rbruktqziv .gt_from_md > :first-child {
  margin-top: 0;
}

#rbruktqziv .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rbruktqziv .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rbruktqziv .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#rbruktqziv .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rbruktqziv .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#rbruktqziv .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rbruktqziv .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rbruktqziv .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rbruktqziv .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rbruktqziv .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rbruktqziv .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#rbruktqziv .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rbruktqziv .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#rbruktqziv .gt_left {
  text-align: left;
}

#rbruktqziv .gt_center {
  text-align: center;
}

#rbruktqziv .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rbruktqziv .gt_font_normal {
  font-weight: normal;
}

#rbruktqziv .gt_font_bold {
  font-weight: bold;
}

#rbruktqziv .gt_font_italic {
  font-style: italic;
}

#rbruktqziv .gt_super {
  font-size: 65%;
}

#rbruktqziv .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="rbruktqziv" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Student</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">STAT227</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Treated</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Outcome</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">Yes</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">8.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">Yes</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">7.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">3</td>
      <td class="gt_row gt_center">Yes</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">8.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">4</td>
      <td class="gt_row gt_center">Yes</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">6.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">No</td>
      <td class="gt_row gt_center">TRUE</td>
      <td class="gt_row gt_center">7.5</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">6</td>
      <td class="gt_row gt_center">No</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">8.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center">No</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">10.0</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center">No</td>
      <td class="gt_row gt_center">FALSE</td>
      <td class="gt_row gt_center">8.0</td>
    </tr>
  </tbody>
  
  
</table></div>
]

.pull-right[
### Taking STAT 228 might be correlated with taking STAT 227

&lt;img src="dag_227_228.png" width="293" /&gt;
]

--

If **STAT 227** is a *confounder*, that means that those who *took STAT 228* differ from those who *did not take STAT 228* in some key way. 

---

# Confounding

- `\(\large E[Y(1)]-E[Y(0)]\neq E[Y\mid T = 1] - E[Y\mid T = 0]\normalsize\)`

.center[
### Why?
]

--

.center[
## The groups aren't comparable!
]

.center[
&lt;img src="confounding.png" width="617" /&gt;
]

---

# ATEs in Regression


```r
stat228_data = tibble(
  stat227 = c("Yes", "Yes", "Yes", "Yes", "No", "No", "No", "No"), 
  stat228 = c("Yes", "Yes", "Yes", "No", "Yes", "No", "No", "No"), 
  Outcome = c(8, 7.5, 8.5, 6, 7.5, 8, 10, 8)
)
stat228_model = lm(Outcome ~ stat228 + stat227, data = stat228_data)
tidy(stat228_model)
```

```
## # A tibble: 3 √ó 5
##   term        estimate std.error statistic   p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1 (Intercept)    8.27      0.636    13.0   0.0000478
## 2 stat228Yes     0.417     0.961     0.434 0.683    
## 3 stat227Yes    -1.08      0.961    -1.13  0.311
```

`\(\widehat{Outcome}=8.27+0.417(\text{STAT228})-1.08(\text{STAT227})\)`

- `\(\hat{\beta}_{1}=0.417\)`: **Is this the ATE?**

--

.center[
## It's only one estimate of the ATE!
]

---

class: center, middle, frame

# Matching on Covariates

---

# Randomized Controlled Trials (RCTs)

.pull-left[
&lt;img src="rct.png" width="80%" /&gt;
]

.pull-right[
.display1[The treatment and control groups are **balanced**!]

Though RCTs can be .display2[infeasible] for a number of reasons. 

- .display3[Money] ü§ëü§ëü§ë
- .display3[Ethics] üòá
- .display3[Logistics] üìÜ
- .display3[Restricted Population] üö´
]

---

# Observational Studies

.pull-left[
&lt;img src="obs_study.png" width="80%" /&gt;
]

.pull-right[
The causal pathway between **treatment** and **outcome** is no longer .display1[identifiable]!

- There exist .display2[confounders] that have associations with *both* the treatment and outcome. 

- .display3[Treatment is not allocated at RANDOM!]
]

---

# R Workshop Observational Study



.center[
.display2[Does an R workshop cause a STAT test score to increase among employees at a tech company?]

.display1[Snapshot of sample] üëáüëáüëá
]

.center[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#pwhgzwymks .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#pwhgzwymks .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pwhgzwymks .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#pwhgzwymks .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#pwhgzwymks .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pwhgzwymks .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pwhgzwymks .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#pwhgzwymks .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#pwhgzwymks .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#pwhgzwymks .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#pwhgzwymks .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#pwhgzwymks .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#pwhgzwymks .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#pwhgzwymks .gt_from_md > :first-child {
  margin-top: 0;
}

#pwhgzwymks .gt_from_md > :last-child {
  margin-bottom: 0;
}

#pwhgzwymks .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#pwhgzwymks .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#pwhgzwymks .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pwhgzwymks .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#pwhgzwymks .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pwhgzwymks .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#pwhgzwymks .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#pwhgzwymks .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pwhgzwymks .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pwhgzwymks .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#pwhgzwymks .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pwhgzwymks .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#pwhgzwymks .gt_left {
  text-align: left;
}

#pwhgzwymks .gt_center {
  text-align: center;
}

#pwhgzwymks .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#pwhgzwymks .gt_font_normal {
  font-weight: normal;
}

#pwhgzwymks .gt_font_bold {
  font-weight: bold;
}

#pwhgzwymks .gt_font_italic {
  font-style: italic;
}

#pwhgzwymks .gt_super {
  font-size: 65%;
}

#pwhgzwymks .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="pwhgzwymks" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Person</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Group</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Age</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Score</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">11</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center">19</td>
      <td class="gt_row gt_center">85</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">12</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center">22</td>
      <td class="gt_row gt_center">82</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">13</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center">25</td>
      <td class="gt_row gt_center">85</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">14</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center">27</td>
      <td class="gt_row gt_center">86</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">15</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center">32</td>
      <td class="gt_row gt_center">83</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">19</td>
      <td class="gt_row gt_center">84</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">22</td>
      <td class="gt_row gt_center">82</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">3</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">21</td>
      <td class="gt_row gt_center">85</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">4</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">20</td>
      <td class="gt_row gt_center">81</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">24</td>
      <td class="gt_row gt_center">81</td>
    </tr>
  </tbody>
  
  
</table></div>

]

---

# R Workshop Observational Study

.center[
.display2[Does an R workshop cause a STAT test score to increase among employees at a tech company?]

.display1[Snapshot of sample] üëáüëáüëá
]

.center[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#njdhjrbtuo .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#njdhjrbtuo .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#njdhjrbtuo .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#njdhjrbtuo .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#njdhjrbtuo .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#njdhjrbtuo .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#njdhjrbtuo .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#njdhjrbtuo .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#njdhjrbtuo .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#njdhjrbtuo .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#njdhjrbtuo .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#njdhjrbtuo .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#njdhjrbtuo .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#njdhjrbtuo .gt_from_md > :first-child {
  margin-top: 0;
}

#njdhjrbtuo .gt_from_md > :last-child {
  margin-bottom: 0;
}

#njdhjrbtuo .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#njdhjrbtuo .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#njdhjrbtuo .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#njdhjrbtuo .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#njdhjrbtuo .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#njdhjrbtuo .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#njdhjrbtuo .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#njdhjrbtuo .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#njdhjrbtuo .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#njdhjrbtuo .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#njdhjrbtuo .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#njdhjrbtuo .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#njdhjrbtuo .gt_left {
  text-align: left;
}

#njdhjrbtuo .gt_center {
  text-align: center;
}

#njdhjrbtuo .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#njdhjrbtuo .gt_font_normal {
  font-weight: normal;
}

#njdhjrbtuo .gt_font_bold {
  font-weight: bold;
}

#njdhjrbtuo .gt_font_italic {
  font-style: italic;
}

#njdhjrbtuo .gt_super {
  font-size: 65%;
}

#njdhjrbtuo .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="njdhjrbtuo" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Person</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Group</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Age</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Y</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Y(1)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Y(0)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Effect</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">11</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center">19</td>
      <td class="gt_row gt_center">85</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">?</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">85</td>
      <td class="gt_row gt_center">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">12</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center">22</td>
      <td class="gt_row gt_center">82</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">?</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">82</td>
      <td class="gt_row gt_center">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">13</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center">25</td>
      <td class="gt_row gt_center">85</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">?</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">85</td>
      <td class="gt_row gt_center">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">14</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center">27</td>
      <td class="gt_row gt_center">86</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">?</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">86</td>
      <td class="gt_row gt_center">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">15</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center">32</td>
      <td class="gt_row gt_center">83</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">?</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">83</td>
      <td class="gt_row gt_center">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">19</td>
      <td class="gt_row gt_center">84</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">85</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">?</td>
      <td class="gt_row gt_center">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">22</td>
      <td class="gt_row gt_center">82</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">83</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">?</td>
      <td class="gt_row gt_center">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">3</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">21</td>
      <td class="gt_row gt_center">85</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">86</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">?</td>
      <td class="gt_row gt_center">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">4</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">20</td>
      <td class="gt_row gt_center">81</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">82</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">?</td>
      <td class="gt_row gt_center">?</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">24</td>
      <td class="gt_row gt_center">81</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">82</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">?</td>
      <td class="gt_row gt_center">?</td>
    </tr>
  </tbody>
  
  
</table></div>

]

---

# R Workshop Observational Study

.center-small[
<div id="htmlwidget-8182888c5bb3afcea24e" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-8182888c5bb3afcea24e">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"Person":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],"Group":["Treatment","Treatment","Treatment","Treatment","Treatment","Treatment","Treatment","Treatment","Treatment","Treatment","Control","Control","Control","Control","Control","Control","Control","Control","Control","Control","Control","Control","Control","Control","Control","Control","Control","Control","Control","Control"],"Age":[19,22,21,20,24,27,30,26,32,23,19,22,25,27,32,20,30,21,24,26,26,24,37,45,50,48,32,23,39,36],"Score":[84,82,85,81,81,87,96,95,96,94,85,82,85,86,83,86,84,85,86,82,92,100,93,93,93,97,94,94,95,86]},"columns":[{"accessor":"Person","name":"Person","type":"numeric"},{"accessor":"Group","name":"Group","type":"character"},{"accessor":"Age","name":"Age","type":"numeric","aggregate":"mean"},{"accessor":"Score","name":"Score","type":"numeric","aggregate":"mean"}],"pivotBy":["Group"],"defaultPageSize":10,"paginationType":"numbers","showPagination":true,"showPageInfo":true,"minRows":1,"dataKey":"a801dac4604207d77cf9e4e758dc193d","key":"a801dac4604207d77cf9e4e758dc193d"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
]

--

.pull-left[

```r
fake_scores %&gt;%
  group_by(Group) %&gt;%
  summarize(mean_score = mean(Score))
```

```
## # A tibble: 2 √ó 2
##   Group     mean_score
##   &lt;chr&gt;          &lt;dbl&gt;
## 1 Control         89.0
## 2 Treatment       88.1
```


```r
88.1 - 89.0
```

```
## [1] -0.9
```

.center[
üò≥üò≥üò≥
]
]

--

.pull-right[
&lt;img src="11-Intro_Causal_Inference_files/figure-html/unnamed-chunk-35-1.png" width="100%" /&gt;
]

---

# Is Age confounding?

.pull-left[

```r
fake_scores %&gt;%
  group_by(Group) %&gt;%
  summarize(mean_age = mean(Age))
```

```
## # A tibble: 2 √ó 2
##   Group     mean_age
##   &lt;chr&gt;        &lt;dbl&gt;
## 1 Control       30.3
## 2 Treatment     24.4
```
]

.pull-right[
&lt;img src="11-Intro_Causal_Inference_files/figure-html/unnamed-chunk-37-1.png" width="100%" /&gt;
]

--

.center[
.display2[Age seems to be associated with both treatment and score.]
]

---

# Where we stand

1. .display1[We have missing *potential outcomes* and therefore cannot obtain unit-level treatment effects.]

2. .display2[*Age* is clearly confounding; it is associated with (i) whether an individual participates in the R Workshop, and (ii) the STAT score (outcome). ]

3. .display3[There is *some overlap* among *age* in both treatment groups. ]

--

&lt;br&gt;&lt;/br&gt;

We still cannot magically go back in time and generate those missing potential outcomes! üòû

.display1[But...]

- What if we *imputed* the missing potential outcomes by *conditioning on age*? ü§î

---

class: center, middle, frame

# Exact Matching

---

# How does it work?

.display2[Exact matching] works by filling in missing potential outcomes for each **treated individual** using a **control individual** that is "closest" to the treated individual for some *X* confounder(s). 

--

.pull-left[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#bcimtpocol .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bcimtpocol .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bcimtpocol .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bcimtpocol .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bcimtpocol .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bcimtpocol .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bcimtpocol .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bcimtpocol .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bcimtpocol .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bcimtpocol .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bcimtpocol .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bcimtpocol .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#bcimtpocol .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#bcimtpocol .gt_from_md > :first-child {
  margin-top: 0;
}

#bcimtpocol .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bcimtpocol .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bcimtpocol .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#bcimtpocol .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bcimtpocol .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#bcimtpocol .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bcimtpocol .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bcimtpocol .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bcimtpocol .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bcimtpocol .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bcimtpocol .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#bcimtpocol .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bcimtpocol .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#bcimtpocol .gt_left {
  text-align: left;
}

#bcimtpocol .gt_center {
  text-align: center;
}

#bcimtpocol .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bcimtpocol .gt_font_normal {
  font-weight: normal;
}

#bcimtpocol .gt_font_bold {
  font-weight: bold;
}

#bcimtpocol .gt_font_italic {
  font-style: italic;
}

#bcimtpocol .gt_super {
  font-size: 65%;
}

#bcimtpocol .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="bcimtpocol" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Person</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Group</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Age</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Score</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">19</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">84</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">22</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">82</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">3</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">21</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">85</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">4</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">20</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">81</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">24</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">81</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">6</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">27</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">87</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">30</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">96</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">26</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">95</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">9</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">32</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">96</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">10</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">23</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">94</td>
    </tr>
  </tbody>
  
  
</table></div>
]

--

.pull-right[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#phvawrmong .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#phvawrmong .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#phvawrmong .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#phvawrmong .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#phvawrmong .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#phvawrmong .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#phvawrmong .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#phvawrmong .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#phvawrmong .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#phvawrmong .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#phvawrmong .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#phvawrmong .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#phvawrmong .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#phvawrmong .gt_from_md > :first-child {
  margin-top: 0;
}

#phvawrmong .gt_from_md > :last-child {
  margin-bottom: 0;
}

#phvawrmong .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#phvawrmong .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#phvawrmong .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#phvawrmong .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#phvawrmong .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#phvawrmong .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#phvawrmong .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#phvawrmong .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#phvawrmong .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#phvawrmong .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#phvawrmong .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#phvawrmong .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#phvawrmong .gt_left {
  text-align: left;
}

#phvawrmong .gt_center {
  text-align: center;
}

#phvawrmong .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#phvawrmong .gt_font_normal {
  font-weight: normal;
}

#phvawrmong .gt_font_bold {
  font-weight: bold;
}

#phvawrmong .gt_font_italic {
  font-style: italic;
}

#phvawrmong .gt_super {
  font-size: 65%;
}

#phvawrmong .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="phvawrmong" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Person</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Group</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Age</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Score</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">11</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">19</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">85</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">12</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">22</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">82</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">18</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">21</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">85</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">16</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">20</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">86</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">19, 22</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">24</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">93</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">14</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">27</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">86</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">17</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">30</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">84</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">20, 21</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">26</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">87</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">15</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">32</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">83</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">28</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">23</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">94</td>
    </tr>
  </tbody>
  
  
</table></div>
]

---

# Covariate Balance

Let's see how the distribution of `age` looks in the **matched** sample:

.center[
&lt;img src="11-Intro_Causal_Inference_files/figure-html/unnamed-chunk-40-1.png" width="60%" /&gt;
]

---

# How does it work?

.center[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#otujfrfrxp .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#otujfrfrxp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#otujfrfrxp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#otujfrfrxp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#otujfrfrxp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#otujfrfrxp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#otujfrfrxp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#otujfrfrxp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#otujfrfrxp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#otujfrfrxp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#otujfrfrxp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#otujfrfrxp .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#otujfrfrxp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#otujfrfrxp .gt_from_md > :first-child {
  margin-top: 0;
}

#otujfrfrxp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#otujfrfrxp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#otujfrfrxp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#otujfrfrxp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#otujfrfrxp .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#otujfrfrxp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#otujfrfrxp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#otujfrfrxp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#otujfrfrxp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#otujfrfrxp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#otujfrfrxp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#otujfrfrxp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#otujfrfrxp .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#otujfrfrxp .gt_left {
  text-align: left;
}

#otujfrfrxp .gt_center {
  text-align: center;
}

#otujfrfrxp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#otujfrfrxp .gt_font_normal {
  font-weight: normal;
}

#otujfrfrxp .gt_font_bold {
  font-weight: bold;
}

#otujfrfrxp .gt_font_italic {
  font-style: italic;
}

#otujfrfrxp .gt_super {
  font-size: 65%;
}

#otujfrfrxp .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="otujfrfrxp" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Person</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Group</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Age</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Y</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Y(1)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Y(0)</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Effect</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">19</td>
      <td class="gt_row gt_center">84</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">84</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">85</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.2);">-1</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">2</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">22</td>
      <td class="gt_row gt_center">82</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">82</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">82</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.2);">0</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">3</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">21</td>
      <td class="gt_row gt_center">85</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">85</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">85</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.2);">0</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">4</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">20</td>
      <td class="gt_row gt_center">81</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">81</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">86</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.2);">-5</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">24</td>
      <td class="gt_row gt_center">81</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">81</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">93</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.2);">-12</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">6</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">27</td>
      <td class="gt_row gt_center">87</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">87</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">86</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.2);">1</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">30</td>
      <td class="gt_row gt_center">96</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">96</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">84</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.2);">12</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">8</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">26</td>
      <td class="gt_row gt_center">95</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">95</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">87</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.2);">8</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">9</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">32</td>
      <td class="gt_row gt_center">96</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">96</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">83</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.2);">13</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">10</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center">23</td>
      <td class="gt_row gt_center">94</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">94</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">94</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(127,255,0,0.2);">0</td>
    </tr>
  </tbody>
  
  
</table></div>

# ATT (estimated) = 1.6 üòéüòéüòé
]

---

# Some Notes

We just performed .display2[exact matching] to 

- (i) impute missing potential outcomes and 
- (ii) generate an *estimate* of the **ATT** (average treatment effect **on the treated**)

--

Remember, the *treated* individuals still have only one **observed** outcome!. 

- We *imputed* each `\(Y(0)\)` by using the **observed** outcomes of *control* individuals with the **EXACT** same `age` as their match in the treatment group. 

--

By matching on the *confounder* `age`, we have achieved **exact** *covariate balance* on `age`. 

---

# More than one match

But what if a treated individual has .display1[more than one] "closest" match from the control group?

.pull-left[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#cbhfaxepsk .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#cbhfaxepsk .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cbhfaxepsk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#cbhfaxepsk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#cbhfaxepsk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cbhfaxepsk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cbhfaxepsk .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#cbhfaxepsk .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#cbhfaxepsk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#cbhfaxepsk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#cbhfaxepsk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#cbhfaxepsk .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#cbhfaxepsk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#cbhfaxepsk .gt_from_md > :first-child {
  margin-top: 0;
}

#cbhfaxepsk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#cbhfaxepsk .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#cbhfaxepsk .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#cbhfaxepsk .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cbhfaxepsk .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#cbhfaxepsk .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cbhfaxepsk .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#cbhfaxepsk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#cbhfaxepsk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cbhfaxepsk .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cbhfaxepsk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#cbhfaxepsk .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cbhfaxepsk .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#cbhfaxepsk .gt_left {
  text-align: left;
}

#cbhfaxepsk .gt_center {
  text-align: center;
}

#cbhfaxepsk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#cbhfaxepsk .gt_font_normal {
  font-weight: normal;
}

#cbhfaxepsk .gt_font_bold {
  font-weight: bold;
}

#cbhfaxepsk .gt_font_italic {
  font-style: italic;
}

#cbhfaxepsk .gt_super {
  font-size: 65%;
}

#cbhfaxepsk .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="cbhfaxepsk" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Person</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Group</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Age</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Score</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">24</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">81</td>
    </tr>
  </tbody>
  
  
</table></div>
]

.pull-right[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#prhlhhsnff .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#prhlhhsnff .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#prhlhhsnff .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#prhlhhsnff .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#prhlhhsnff .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#prhlhhsnff .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#prhlhhsnff .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#prhlhhsnff .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#prhlhhsnff .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#prhlhhsnff .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#prhlhhsnff .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#prhlhhsnff .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#prhlhhsnff .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#prhlhhsnff .gt_from_md > :first-child {
  margin-top: 0;
}

#prhlhhsnff .gt_from_md > :last-child {
  margin-bottom: 0;
}

#prhlhhsnff .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#prhlhhsnff .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#prhlhhsnff .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#prhlhhsnff .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#prhlhhsnff .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#prhlhhsnff .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#prhlhhsnff .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#prhlhhsnff .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#prhlhhsnff .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#prhlhhsnff .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#prhlhhsnff .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#prhlhhsnff .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#prhlhhsnff .gt_left {
  text-align: left;
}

#prhlhhsnff .gt_center {
  text-align: center;
}

#prhlhhsnff .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#prhlhhsnff .gt_font_normal {
  font-weight: normal;
}

#prhlhhsnff .gt_font_bold {
  font-weight: bold;
}

#prhlhhsnff .gt_font_italic {
  font-style: italic;
}

#prhlhhsnff .gt_super {
  font-size: 65%;
}

#prhlhhsnff .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="prhlhhsnff" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Person</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Group</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Age</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Score</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">19</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">24</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">86</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">22</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">24</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">100</td>
    </tr>
  </tbody>
  
  
</table></div>
]

--

.pull-right[
.display2[Take the *average* of the outcomes for the "closest" matches! üëá]

<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#owiffcsqkq .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#owiffcsqkq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#owiffcsqkq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#owiffcsqkq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#owiffcsqkq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#owiffcsqkq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#owiffcsqkq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#owiffcsqkq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#owiffcsqkq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#owiffcsqkq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#owiffcsqkq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#owiffcsqkq .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#owiffcsqkq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#owiffcsqkq .gt_from_md > :first-child {
  margin-top: 0;
}

#owiffcsqkq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#owiffcsqkq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#owiffcsqkq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#owiffcsqkq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#owiffcsqkq .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#owiffcsqkq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#owiffcsqkq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#owiffcsqkq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#owiffcsqkq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#owiffcsqkq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#owiffcsqkq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#owiffcsqkq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#owiffcsqkq .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#owiffcsqkq .gt_left {
  text-align: left;
}

#owiffcsqkq .gt_center {
  text-align: center;
}

#owiffcsqkq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#owiffcsqkq .gt_font_normal {
  font-weight: normal;
}

#owiffcsqkq .gt_font_bold {
  font-weight: bold;
}

#owiffcsqkq .gt_font_italic {
  font-style: italic;
}

#owiffcsqkq .gt_super {
  font-size: 65%;
}

#owiffcsqkq .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="owiffcsqkq" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Person</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Group</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Age</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Score</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">19, 22</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">24</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(30,144,255,0.2);">93</td>
    </tr>
  </tbody>
  
  
</table></div>

]

---

# Recap

We used .display1[exact matching] to create a .display2[matching estimator] to estimate the .display3[ATT] in an *observational study* comparing two treatment groups. 

- In the (fake) study of effects of an R Workshop on a STAT score among tech company employees, `age` was a **confounder**. 

- The two treatment groups were *different* (on `age`) in ways that were likely directly related to their potential outcomes. 

- In the matched sample, the .display1[R Workshop] and .display3[Control] groups were **balanced** on `age`. 

--

We performed .display1[exact matching], so individuals are matched *only if* their covariate values are EQUAL. 

- What if covariate values are *close*, or there are *many* covariates? ü§î

---

class: center, middle, frame

# Approximate Matching

---

# Limitations of Exact Matching

**Exact matching** can break down when we are matching on a *large* number of covariates. 

- It's much less likely for two individuals to be exactly the same on (for example) 10 characteristics, compared to one!

ü§îüëâ In this case, how can we determine .display1["closeness"] between two individuals to be matched?

--

.pull-left[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#uzhpwsluqt .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#uzhpwsluqt .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#uzhpwsluqt .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#uzhpwsluqt .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#uzhpwsluqt .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#uzhpwsluqt .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#uzhpwsluqt .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#uzhpwsluqt .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#uzhpwsluqt .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#uzhpwsluqt .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#uzhpwsluqt .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#uzhpwsluqt .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#uzhpwsluqt .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#uzhpwsluqt .gt_from_md > :first-child {
  margin-top: 0;
}

#uzhpwsluqt .gt_from_md > :last-child {
  margin-bottom: 0;
}

#uzhpwsluqt .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#uzhpwsluqt .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#uzhpwsluqt .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#uzhpwsluqt .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#uzhpwsluqt .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#uzhpwsluqt .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#uzhpwsluqt .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#uzhpwsluqt .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#uzhpwsluqt .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#uzhpwsluqt .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#uzhpwsluqt .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#uzhpwsluqt .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#uzhpwsluqt .gt_left {
  text-align: left;
}

#uzhpwsluqt .gt_center {
  text-align: center;
}

#uzhpwsluqt .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#uzhpwsluqt .gt_font_normal {
  font-weight: normal;
}

#uzhpwsluqt .gt_font_bold {
  font-weight: bold;
}

#uzhpwsluqt .gt_font_italic {
  font-style: italic;
}

#uzhpwsluqt .gt_super {
  font-size: 65%;
}

#uzhpwsluqt .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="uzhpwsluqt" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Person</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Group</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Age</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Score</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">Treatment</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">24</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">81</td>
    </tr>
  </tbody>
  
  
</table></div>
]

.pull-right[
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#euxbkynrht .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#euxbkynrht .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#euxbkynrht .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#euxbkynrht .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#euxbkynrht .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#euxbkynrht .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#euxbkynrht .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#euxbkynrht .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#euxbkynrht .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#euxbkynrht .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#euxbkynrht .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#euxbkynrht .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#euxbkynrht .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#euxbkynrht .gt_from_md > :first-child {
  margin-top: 0;
}

#euxbkynrht .gt_from_md > :last-child {
  margin-bottom: 0;
}

#euxbkynrht .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#euxbkynrht .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#euxbkynrht .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#euxbkynrht .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#euxbkynrht .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#euxbkynrht .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#euxbkynrht .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#euxbkynrht .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#euxbkynrht .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#euxbkynrht .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#euxbkynrht .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#euxbkynrht .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#euxbkynrht .gt_left {
  text-align: left;
}

#euxbkynrht .gt_center {
  text-align: center;
}

#euxbkynrht .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#euxbkynrht .gt_font_normal {
  font-weight: normal;
}

#euxbkynrht .gt_font_bold {
  font-weight: bold;
}

#euxbkynrht .gt_font_italic {
  font-style: italic;
}

#euxbkynrht .gt_super {
  font-size: 65%;
}

#euxbkynrht .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="euxbkynrht" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Person</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Group</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Age</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Score</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">13</td>
      <td class="gt_row gt_center">Control</td>
      <td class="gt_row gt_center" style="background-color: rgba(127,255,0,0.2);">25</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">85</td>
    </tr>
  </tbody>
  
  
</table></div>
]

&lt;br&gt;&lt;/br&gt;

.center[
### "Distance" = 25 - 24 = 1
]

---

# Limitations of Exact Matching

**Exact matching** can break down when we are matching on a *large* number of covariates. 

- It's much less likely for two individuals to be exactly the same on (for example) 10 characteristics, compared to one!

ü§îüëâ In this case, how can we determine .display1["closeness"] between two individuals to be matched?

<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#qyzcbniyiy .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qyzcbniyiy .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qyzcbniyiy .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qyzcbniyiy .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qyzcbniyiy .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qyzcbniyiy .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qyzcbniyiy .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qyzcbniyiy .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qyzcbniyiy .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qyzcbniyiy .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qyzcbniyiy .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qyzcbniyiy .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#qyzcbniyiy .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qyzcbniyiy .gt_from_md > :first-child {
  margin-top: 0;
}

#qyzcbniyiy .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qyzcbniyiy .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qyzcbniyiy .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#qyzcbniyiy .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qyzcbniyiy .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#qyzcbniyiy .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qyzcbniyiy .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qyzcbniyiy .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qyzcbniyiy .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qyzcbniyiy .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qyzcbniyiy .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#qyzcbniyiy .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qyzcbniyiy .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#qyzcbniyiy .gt_left {
  text-align: left;
}

#qyzcbniyiy .gt_center {
  text-align: center;
}

#qyzcbniyiy .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qyzcbniyiy .gt_font_normal {
  font-weight: normal;
}

#qyzcbniyiy .gt_font_bold {
  font-weight: bold;
}

#qyzcbniyiy .gt_font_italic {
  font-style: italic;
}

#qyzcbniyiy .gt_super {
  font-size: 65%;
}

#qyzcbniyiy .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="qyzcbniyiy" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">ID</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">R Workshop</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Intro Stats</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Education</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Income</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Age</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Score</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_center">580</td>
      <td class="gt_row gt_center" style="background-color: rgba(30,144,255,0.2);">1</td>
      <td class="gt_row gt_center">0</td>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">138.1809</td>
      <td class="gt_row gt_center">37</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">87</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">868</td>
      <td class="gt_row gt_center" style="background-color: rgba(30,144,255,0.2);">0</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">128.0935</td>
      <td class="gt_row gt_center">35</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">83</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">556</td>
      <td class="gt_row gt_center" style="background-color: rgba(30,144,255,0.2);">0</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">5</td>
      <td class="gt_row gt_center">141.1063</td>
      <td class="gt_row gt_center">37</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">86</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">353</td>
      <td class="gt_row gt_center" style="background-color: rgba(30,144,255,0.2);">0</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">7</td>
      <td class="gt_row gt_center">161.4492</td>
      <td class="gt_row gt_center">38</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">84</td>
    </tr>
    <tr>
      <td class="gt_row gt_center">845</td>
      <td class="gt_row gt_center" style="background-color: rgba(30,144,255,0.2);">0</td>
      <td class="gt_row gt_center">1</td>
      <td class="gt_row gt_center">3</td>
      <td class="gt_row gt_center">125.7734</td>
      <td class="gt_row gt_center">40</td>
      <td class="gt_row gt_center" style="color: black; font-weight: bold; background-color: rgba(255,105,180,0.2);">84</td>
    </tr>
  </tbody>
  
  
</table></div>

.center[
### What is the "distance" now?
]

---

# Nearest-Neighbor Covariate Matching

In .display2[nearest-neighbor matching], we find *untreated* observations that are similar (i.e., **very close**) to *treated* observations based on .display1[confounders]. 

--

There are a lot of fairly technical ways to measure "distance" between **vectors** of covariates. 

- .display1[Euclidean Distance]: `$$||X_{i}-X_{j}||=\sqrt{(X_{i}-X_{j})'(X_{i}-X_{j})}$$`

- .display2[Mahalanobis Distance]: `$$\sqrt{(X_{i}-X_{j})'\boldsymbol\Sigma^{-1}(X_{i}-X_{j})}$$`

.center[
üö®üö®üö® .display3[Don't worry, R will do all of this for us!]
]

---

# MatchIt R package


```r
library(MatchIt)
match_model = matchit(r_workshop ~ education + income + age + intro_stats, 
                       data = r_workshop_scores, 
                       method = "nearest",
                       distance = "mahalanobis", 
                       replace = TRUE)
summary(match_model)$sum.all[, 1:4]
```

```
##             Means Treated Means Control Std. Mean Diff. Var. Ratio
## education       4.8289738     5.0755467      -0.1838193  1.1135817
## income        137.1104570   151.3266066      -0.5038549  0.9691089
## age            38.3963783    40.9920477      -0.5267304  1.1204645
## intro_stats     0.3682093     0.4353877      -0.1392823         NA
```

--


```r
summary(match_model)$sum.matched[, 1:4]
```

```
##             Means Treated Means Control Std. Mean Diff. Var. Ratio
## education       4.8289738     4.8470825     -0.01349994   1.133522
## income        137.1104570   137.4712972     -0.01278905   1.066695
## age            38.3963783    38.5271630     -0.02653970   1.184815
## intro_stats     0.3682093     0.3682093      0.00000000         NA
```


```r
matched_data = match.data(match_model)
```

---

# Finding the Matching Estimator

Once we have the .display2[matched dataset], we could plug this into an `lm()` to see what the ATT is!


```r
model_matched_data = lm(score ~ r_workshop, data = matched_data)
tidy(model_matched_data)
```

```
## # A tibble: 2 √ó 5
##   term        estimate std.error statistic   p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1 (Intercept)    82.6      0.198     416.  0        
## 2 r_workshop      8.52     0.244      34.9 2.05e-159
```

---

# References/Further Reading

1. Andrew Heiss's Program Evaluation course: [https://evalsp21.classes.andrewheiss.com/](https://evalsp21.classes.andrewheiss.com/)

2. Brady Neal's Introduction to Causal Inference course: [https://www.bradyneal.com/causal-inference-course](https://www.bradyneal.com/causal-inference-course)

3. Causal Inference: The Mixtape, by Scott Cunningham: [https://mixtape.scunning.com/](https://mixtape.scunning.com/)

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"countIncrementalSlides": false,
"highlightLines": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
